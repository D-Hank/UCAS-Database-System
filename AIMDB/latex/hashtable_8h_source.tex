\hypertarget{hashtable_8h_source}{}\doxysection{hashtable.\+h}
\label{hashtable_8h_source}\index{system/hashtable.h@{system/hashtable.h}}
\mbox{\hyperlink{hashtable_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{15 \textcolor{preprocessor}{\#ifndef \_HASH\_TABLE\_H}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#define \_HASH\_TABLE\_H}}
\DoxyCodeLine{17 \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{preprocessor}{\#include <stdio.h>}}
\DoxyCodeLine{20 \textcolor{preprocessor}{\#include <stdint.h>}}
\DoxyCodeLine{21 \textcolor{preprocessor}{\#include <stdlib.h>}}
\DoxyCodeLine{22 \textcolor{preprocessor}{\#include <string.h>}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include <unordered\_map>}}
\DoxyCodeLine{24 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{mymemory_8h}{mymemory.h}}"{}}}
\DoxyCodeLine{25 }
\DoxyCodeLine{26 \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{28 \textcolor{keyword}{class }\mbox{\hyperlink{classHashcode__Ptr}{Hashcode\_Ptr}} \{}
\DoxyCodeLine{29   \textcolor{keyword}{public}:}
\DoxyCodeLine{30     int64\_t \mbox{\hyperlink{classHashcode__Ptr_acbbfad42e594bd9735b0e285312f093e}{hash\_code}};  }
\DoxyCodeLine{31     \textcolor{keywordtype}{char} *\mbox{\hyperlink{classHashcode__Ptr_a4a5048ef9ddf1f1e6b96079cf46c10e4}{tuple}};        }
\DoxyCodeLine{32 \};  \textcolor{comment}{// class Hashcode\_Ptr}}
\DoxyCodeLine{33 }
\DoxyCodeLine{35 \textcolor{keyword}{class }\mbox{\hyperlink{classHashCell}{HashCell}} \{}
\DoxyCodeLine{36   \textcolor{keyword}{public}:}
\DoxyCodeLine{37     \textcolor{keywordtype}{int} \mbox{\hyperlink{classHashCell_a7b319cd47079f85420189d500a2a203e}{hc\_num}};   }
\DoxyCodeLine{38     \textcolor{keyword}{union }\{}
\DoxyCodeLine{39         \mbox{\hyperlink{classHashcode__Ptr}{Hashcode\_Ptr}} \mbox{\hyperlink{classHashCell_a45c7d6f1c19579dc8cecf1029035bd42}{ent}};        }
\DoxyCodeLine{40         \textcolor{keyword}{struct }\{                 \textcolor{comment}{// not hit,seach a array,not a link-\/list,decrease cache miss}}
\DoxyCodeLine{41             \textcolor{keywordtype}{int} \mbox{\hyperlink{classHashCell_a8249888458c1ef9336d1919524d62242}{capacity}};        }
\DoxyCodeLine{42             \mbox{\hyperlink{classHashcode__Ptr}{Hashcode\_Ptr}} *\mbox{\hyperlink{classHashCell_a84b03455cbaa4257563e2dfb12609e25}{ents}};  }
\DoxyCodeLine{43         \} \mbox{\hyperlink{classHashCell_a1f025a66cd356d83c92fd5410c456aed}{num\_2\_or\_more}};         }
\DoxyCodeLine{44     \} \mbox{\hyperlink{classHashCell_ab301cb5a301991546935288783efd39a}{hc\_union}};  }
\DoxyCodeLine{45 \};  \textcolor{comment}{// class HashCell}}
\DoxyCodeLine{46 }
\DoxyCodeLine{47 \textcolor{preprocessor}{\#define hc\_ent          hc\_union.ent}}
\DoxyCodeLine{48 \textcolor{preprocessor}{\#define hc\_capacity     hc\_union.num\_2\_or\_more.capacity}}
\DoxyCodeLine{49 \textcolor{preprocessor}{\#define hc\_ents         hc\_union.num\_2\_or\_more.ents}}
\DoxyCodeLine{50 }
\DoxyCodeLine{52 \textcolor{keyword}{class }\mbox{\hyperlink{classHashTable}{HashTable}} \{}
\DoxyCodeLine{53   \textcolor{keyword}{public}:}
\DoxyCodeLine{54     \textcolor{keywordtype}{int} \mbox{\hyperlink{classHashTable_a3ab37f5b03936b189973c425f68b3e0b}{estimated\_num\_distinct\_keys}};     }
\DoxyCodeLine{55     \textcolor{keywordtype}{double} \mbox{\hyperlink{classHashTable_a18566e906aad7c02be72c21ce12097cb}{estimated\_duplicates\_per\_key}}; }
\DoxyCodeLine{56     \textcolor{keywordtype}{int} \mbox{\hyperlink{classHashTable_a6d2d414097d83021b55db24df8ca1c1a}{initial\_array\_size}};              }
\DoxyCodeLine{57     \textcolor{keywordtype}{char} *\mbox{\hyperlink{classHashTable_a3e44159a2b9f59f7aad60b8e5da6a2d8}{begin}};                         }
\DoxyCodeLine{58     \mbox{\hyperlink{classHashcode__Ptr}{Hashcode\_Ptr}} *\mbox{\hyperlink{classHashTable_a08e7e931170e0095cdc8ecb477b11a96}{free\_header}}[16];       }
\DoxyCodeLine{59                                          \textcolor{comment}{// allocate the array}}
\DoxyCodeLine{60                                          \textcolor{comment}{// free\_header[0]: all of initial\_array\_size}}
\DoxyCodeLine{61                                          \textcolor{comment}{// free\_header[1]: 2*initial\_array\_size}}
\DoxyCodeLine{62                                          \textcolor{comment}{// ...}}
\DoxyCodeLine{63                                          \textcolor{comment}{// free\_header[k]: 2\string^k * initial\_array\_size}}
\DoxyCodeLine{64     \mbox{\hyperlink{classHashcode__Ptr}{Hashcode\_Ptr}} *\mbox{\hyperlink{classHashTable_aa03cf70be2b354c1f88d9b99d643a81a}{avail}};                 }
\DoxyCodeLine{65     \mbox{\hyperlink{classHashcode__Ptr}{Hashcode\_Ptr}} *\mbox{\hyperlink{classHashTable_a624e048b1b7093c9e4f62aa7718249c2}{end}};                   }
\DoxyCodeLine{66     \mbox{\hyperlink{classHashCell}{HashCell}} *\mbox{\hyperlink{classHashTable_a9221f0610038f222cdc579a915d4164a}{table}};                     }
\DoxyCodeLine{67     \textcolor{keywordtype}{int} \mbox{\hyperlink{classHashTable_a7a7880d4869f134cdc5cd5f7f1bc4cc5}{table\_size}};                      }
\DoxyCodeLine{68     \textcolor{keywordtype}{int} \mbox{\hyperlink{classHashTable_a1ca73f6ccb2e1e7f1a11bd951f734591}{more\_allocated}};                  }
\DoxyCodeLine{69   \textcolor{keyword}{private}:}
\DoxyCodeLine{70     std::unordered\_map<void*, int> \mbox{\hyperlink{classHashTable_ad57c2d2380d3560449c46561b8f46dbe}{pointer2size}};  }
\DoxyCodeLine{71     \textcolor{keywordtype}{void} *\mbox{\hyperlink{classHashTable_a9331e62335a4a45aa57caec106cda3bf}{allocate}}(\textcolor{keywordtype}{int} size);                     }
\DoxyCodeLine{72     \textcolor{keywordtype}{void}  \mbox{\hyperlink{classHashTable_aedeee1c9d50a8978327e89532774ed79}{free}}(\textcolor{keywordtype}{void} *mem);                        }
\DoxyCodeLine{73     \textcolor{keywordtype}{int} \mbox{\hyperlink{classHashTable_aea3ade11431c8eca2164d108bfcb8ffd}{size\_to\_slot}}(\textcolor{keywordtype}{int} array\_size);             }
\DoxyCodeLine{75   \textcolor{keyword}{public}:}
\DoxyCodeLine{82     \mbox{\hyperlink{classHashTable_a330f09794c4a1b61815a1baff71775e8}{HashTable}}(\textcolor{keywordtype}{int} estimatedNumDistinctKeys, \textcolor{keywordtype}{double} estimatedDupPerKey,}
\DoxyCodeLine{83                \textcolor{keywordtype}{int} num\_partitions);}
\DoxyCodeLine{87     \mbox{\hyperlink{classHashTable_a9ce5569bb945880cacb29aaba6f3e3f9}{\string~HashTable}}();}
\DoxyCodeLine{88 }
\DoxyCodeLine{96     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classHashTable_af0297a629033f28a3c32dddba6604148}{add}}(int64\_t hashCode, \textcolor{keywordtype}{char} *tup);}
\DoxyCodeLine{104     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classHashTable_a7843386b3ee98c476ef1b4aba4e265b3}{del}}(int64\_t hashCode, \textcolor{keywordtype}{char} *tup);}
\DoxyCodeLine{105 }
\DoxyCodeLine{106     \textcolor{comment}{// return num matched}}
\DoxyCodeLine{107     \textcolor{comment}{// <0: means capacity has been reached, there could be more}}
\DoxyCodeLine{108     \textcolor{comment}{// -\/ret is the last position probed}}
\DoxyCodeLine{117 \textcolor{comment}{}    \textcolor{keywordtype}{int} \mbox{\hyperlink{classHashTable_a1af43334e0abd38205b2032af6dc870c}{probe}}(int64\_t hashCode, \textcolor{keywordtype}{char} *match[], \textcolor{keywordtype}{int} capacity);}
\DoxyCodeLine{127     \textcolor{keywordtype}{int} \mbox{\hyperlink{classHashTable_acf2c3acf1dccb9f67460b9379f175320}{probe\_contd}}(int64\_t hashCode, \textcolor{keywordtype}{int} last, \textcolor{keywordtype}{char} *match[],}
\DoxyCodeLine{128                     \textcolor{keywordtype}{int} capacity);}
\DoxyCodeLine{132     \textcolor{keywordtype}{void} \mbox{\hyperlink{classHashTable_a6715f643ba75e8412ea593625568ca41}{utilization}}();}
\DoxyCodeLine{136     \textcolor{keywordtype}{void} \mbox{\hyperlink{classHashTable_aa7a97efa7ce0583d3524c3ef4d40147a}{show}}();}
\DoxyCodeLine{137 }
\DoxyCodeLine{138 \};                              \textcolor{comment}{//HashTable}}
\DoxyCodeLine{139 }
\DoxyCodeLine{140 \textcolor{comment}{/* -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ */}}
\DoxyCodeLine{141 \textcolor{preprocessor}{\#endif                          }\textcolor{comment}{/* \_HASH\_TABLE\_H */}\textcolor{preprocessor}{}}

\end{DoxyCode}
